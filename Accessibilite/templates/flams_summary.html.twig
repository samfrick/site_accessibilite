{% extends "base.html.twig" %}
{% block title %}Résumé{% endblock %}

{% block main %}

<div class="text-center w-[80%] flex flex-col items-center mx-auto mt-8">
    <h1 class="h1 font-bold">Votre tarte flambée</h1>

    <div id="flam-summary" class="summary bg-white p-4 rounded shadow text-left" aria-live="polite">
        <p><strong>Taille :</strong> <span id="summary-taille"></span></p>
        <p><strong>Ingrédients :</strong> <span id="summary-ingredients"></span></p>
        <p><strong>Toppings :</strong> <span id="summary-toppings"></span></p>
    </div>

    <div class="actions flex flex-col gap-2 mt-5">
        <a href="{{ path('flams') }}" class="btn btn-primary">Retourner au formulaire de composition de flams</a>
        <a href="{{ path('home') }}" class="btn btn-secondary">Retourner à la page d’accueil</a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const taille = localStorage.getItem('flam_taille');
        const ingredients = JSON.parse(localStorage.getItem('flam_ingredients') || "[]");
        const toppings = JSON.parse(localStorage.getItem('flam_toppings') || "[]");

        document.getElementById('summary-taille').textContent = taille || "Non précisée";
        document.getElementById('summary-ingredients').textContent = ingredients.length ? ingredients.join(', ') : "Aucun";
        document.getElementById('summary-toppings').textContent = toppings.length ? toppings.join(', ') : "Aucun";
    });
</script>

{% endblock %}